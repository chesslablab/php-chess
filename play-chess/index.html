<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://chesslablab.github.io/php-chess/play-chess/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Play Chess - PHP Chess</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">PHP Chess</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../getting-started/" class="nav-link">Getting Started</a>
                            </li>
                            <li class="navitem">
                                <a href="../formats/" class="nav-link">Formats</a>
                            </li>
                            <li class="navitem">
                                <a href="../heuristics/" class="nav-link">Heuristics</a>
                            </li>
                            <li class="navitem">
                                <a href="../tutor/" class="nav-link">Tutor</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Play Chess</a>
                            </li>
                            <li class="navitem">
                                <a href="../pgn-parsing/" class="nav-link">PGN Parsing</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../tutor/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../pgn-parsing/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-light">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#play-chess" class="nav-link">Play Chess</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#play-randomly" class="nav-link">Play Randomly</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#play-like-a-grandmaster" class="nav-link">Play Like a Grandmaster</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#play-computer" class="nav-link">Play Computer</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="play-chess">Play Chess</h1>
<h2 id="play-randomly">Play Randomly</h2>
<p>âœ¨ Sometimes you want to play a random game of chess.</p>
<p>You could loop 50 times and play a move by instantiating the <a href="https://github.com/chesslablab/php-chess/blob/main/tests/unit/Computer/RandomMoveTest.php">Chess\Computer\RandomMove</a> class like in the example below.</p>
<pre><code class="language-php">use Chess\Computer\RandomMove;
use Chess\Variant\Classical\Board;

$board = new Board();

for ($i = 0; $i &lt; 50; $i++) {
    if ($move = (new RandomMove($board))-&gt;move()) {
        $board-&gt;play($board-&gt;turn, $move['pgn']);
    }
}

echo $board-&gt;movetext();
</code></pre>
<pre><code class="language-text">1.e4 Nc6 2.Qf3 g6 3.b3 Rb8 4.Bb5 Nh6 5.Ke2 Na5 6.c3 Ng4 7.d3 h6 8.h4 Ra8 9.Kd1 b6 10.Ba4 h5 11.b4 Rh7 12.Bc2 Rh8 13.Ke1 a6 14.Kd1 Nb3 15.d4 Na5 16.g3 c6 17.Ne2 Ne5 18.Nf4 d6 19.Nxg6 Kd7 20.b5 Qe8 21.Na3 e6 22.Bd3 Rb8 23.dxe5 dxe5 24.Bb2 Rg8 25.Qg4 Ra8
</code></pre>
<p>The result obtained is a 24 move game since a move is considered to be completed after both players have played a turn.</p>
<h2 id="play-like-a-grandmaster">Play Like a Grandmaster</h2>
<p>âœ¨ The <a href="https://github.com/chesslablab/chess-server/blob/main/data/players.json">players.json</a> file in the <a href="https://github.com/chesslablab/chess-server">Chess Server</a> contains thousands of games by titled FIDE players. This file can be generated with the command line tools available in the <a href="https://github.com/chesslablab/chess-data">Chess Data</a> repo.</p>
<p><a href="https://github.com/chesslablab/php-chess/blob/main/src/Computer/GrandmasterMove.php">Chess\Computer\GrandmasterMove</a> figures out the next move to be made based on the players.json file that is passed to its constructor.</p>
<pre><code class="language-php">use Chess\Computer\GrandmasterMove;
use Chess\Variant\Classical\Board;

$board = new Board();
$board-&gt;play('w', 'e4');

$gmMove = (new GrandmasterMove(__DIR__.'/../data/json/players.json'))-&gt;move($board);

print_r($gmMove);
</code></pre>
<pre><code class="language-text">Array
(
    [pgn] =&gt; c5
    [game] =&gt; Array
        (
            [Event] =&gt; Tilburg
            [Site] =&gt; Tilburg
            [Date] =&gt; 1993.??.??
            [White] =&gt; Morozevich, Alexander
            [Black] =&gt; Adams, Michael
            [Result] =&gt; 1-0
            [ECO] =&gt; B23
            [movetext] =&gt; 1.e4 c5 2.Nc3 Nc6 3.f4 g6 4.Nf3 Bg7 5.Bb5 Nd4 6.Nxd4 cxd4 7.Ne2 a6 8.Ba4 b5 9.Bb3 e6 10.O-O Ne7 11.d3 O-O 12.Qe1 f5 13.Bd2 Nc6 14.Kh1 Bb7 15.Ng1 h6 16.Nf3 Kh7 17.Qg3 Qe7 18.Rae1 a5 19.a3 Rab8 20.Nh4 Qf7 21.Qh3 Ba8 22.Rf3 a4 23.Ba2 b4 24.Bc1 b3 25.cxb3 axb3 26.Bb1 d6 27.Bd2 Kg8 28.g4 Ne7 29.gxf5 gxf5 30.Rg3 Kh7 31.Nf3 Bf6 32.Ng5+ Bxg5 33.fxg5 Ng6 34.Qxh6+ Kg8 35.h4 f4 36.Rh3 Rb7 37.h5 Ne5 38.Rg1 Rc7 39.Rh4 Qe8 40.g6
        )

)
</code></pre>
<p>ðŸŽ‰ Let's now put our knowledge of chess openings to the test.</p>
<h2 id="play-computer">Play Computer</h2>
<p>âœ¨ The Universal Chess Interface (UCI) is an open communication protocol that enables chess engines to communicate with user interfaces.</p>
<p>PHP Chess provides the <a href="https://github.com/chesslablab/php-chess/blob/main/tests/unit/UciEngine/UciEngineTest.php">Chess\UciEngine\UciEngine</a> class representing an UCI engine. To follow this tutorial make sure to install Stockfish if you haven't already.</p>
<pre><code class="language-text">sudo apt-get install stockfish
</code></pre>
<p>Then, you are set up to play chess against the computer as described in the following example.</p>
<pre><code class="language-php">use Chess\UciEngine\UciEngine;
use Chess\UciEngine\Details\Limit;
use Chess\Variant\Classical\Board;

$board = new Board();
$board-&gt;play('w', 'e4');

$limit = new Limit();
$limit-&gt;depth = 3;

$stockfish = (new UciEngine('/usr/games/stockfish'))-&gt;setOption('Skill Level', 9);
$analysis = $stockfish-&gt;analysis($board, $limit);

$board-&gt;playLan('b', $analysis['bestmove']);

echo $board-&gt;movetext();
</code></pre>
<pre><code class="language-text">1.e4 Nf6
</code></pre>
<p>You may want to play against Stockfish starting from a particular FEN with the help of <a href="https://github.com/chesslablab/php-chess/blob/main/tests/unit/Variant/Classical/FenToBoardFactoryTest.php">Chess\Variant\Classical\FenToBoardFactory</a>.</p>
<pre><code class="language-php">use Chess\UciEngine\UciEngine;
use Chess\UciEngine\Details\Limit;
use Chess\Variant\Classical\FenToBoardFactory;

$board = FenToBoardFactory::create('4k2r/pp1b1pp1/8/3pPp1p/P2P1P2/1P3N2/1qr3PP/R3QR1K w k -');

$limit = new Limit();
$limit-&gt;depth = 12;

$stockfish = (new UciEngine('/usr/games/stockfish'))-&gt;setOption('Skill Level', 20);
$analysis = $stockfish-&gt;analysis($board, $limit);

$board-&gt;playLan('w', $analysis['bestmove']);

echo $board-&gt;movetext();
</code></pre>
<pre><code class="language-text">1.Rb1
</code></pre>
<p>The FEN is converted to a chess board object. Then Stockfish's depth limit is set to <code>12</code> and the skill level to <code>20</code>.</p>
<p>The same thing goes to starting a game from a particular SAN movetext. As you can see in the example below, <a href="https://github.com/chesslablab/php-chess/blob/main/tests/unit/Play/SanPlayTest.php">Chess\Play\SanPlay</a> is used for this purpose.</p>
<pre><code class="language-php">use Chess\Play\SanPlay;
use Chess\UciEngine\UciEngine;
use Chess\UciEngine\Details\Limit;

$movetext = '1.d4 Nf6 2.c4 c5 3.d5 e6 4.Nc3 exd5 5.cxd5 d6 6.e4 g6 7.Nf3 Bg7';

$board = (new SanPlay($movetext))-&gt;validate()-&gt;board;

$limit = new Limit();
$limit-&gt;depth = 12;

$stockfish = (new UciEngine('/usr/games/stockfish'))-&gt;setOption('Skill Level', 20);
$analysis = $stockfish-&gt;analysis($board, $limit);

$board-&gt;playLan('w', $analysis['bestmove']);

echo $board-&gt;movetext();
</code></pre>
<pre><code class="language-text">1.d4 Nf6 2.c4 c5 3.d5 e6 4.Nc3 exd5 5.cxd5 d6 6.e4 g6 7.Nf3 Bg7 8.h3
</code></pre>
<p>ðŸŽ‰ Can you beat the computer? Keep it up!</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
